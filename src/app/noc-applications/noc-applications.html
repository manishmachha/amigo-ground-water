<!-- ================== PAGE CONTAINER ================== -->
<div class="min-h-screen bg-slate-50 p-6 space-y-6">
  <!-- ================= HEADER ================= -->
  <div class="flex items-center justify-between">
    <div>
      <h2 class="text-2xl font-medium text-gray-900">Applications</h2>
      <p class="text-sm text-gray-500">Manage and track all NOC applications</p>
    </div>

    <button
      mat-raised-button
      routerLink="/noc-apply"
      class="inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium transition-colors h-9 rounded-md px-3 bg-blue-700 text-white hover:bg-blue-600 cursor-pointer"
    >
      <i class="bi bi-file-earmark-text mr-2"></i>
      New Application
    </button>
  </div>

  <!-- ================= SEARCH & FILTER ================= -->
  <mat-card class="!rounded-2xl !shadow-sm !bg-white">
    <mat-card-header>
      <mat-card-title class="text-base font-medium"> Search & Filter </mat-card-title>
      <mat-card-subtitle class="text-sm text-gray-500">
        Find and filter NOC applications
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <div class="flex flex-wrap gap-4 items-center mt-5">
        <!-- Search -->
        <div class="flex-1 min-w-[260px]">
          <input
            type="text"
            class="w-full h-11 rounded-xl border border-gray-300 bg-white px-4 text-sm focus:outline-none"
            placeholder="Search by Application ID, Project Name, Applicant..."
            (keyup)="dataSource.filter = $any($event.target).value"
          />
        </div>

        <!-- Status -->
        <div class="relative w-48">
          <select
            class="appearance-none flex h-10 w-full items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 focus:outline-none"
          >
            <option value="all">All Status</option>
            <option value="Draft">Under Scrutiny</option>
            <option value="Submitted">Submitted</option>
            <option value="Approved">Approved</option>
            <option value="Field inspection">Field inspection</option>
            <option value="Rejected">Rejected</option>
          </select>

          <i
            class="bi bi-chevron-down pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm"
          >
          </i>
        </div>

        <!-- Category -->
        <div class="relative w-56">
          <select
            class="appearance-none flex h-10 w-full items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 focus:outline-none"
          >
            <option value="all">All Categories</option>
            <option value="Commercial Use">Mining</option>
            <option value="Agricultural Activities">Industrial</option>
            <option value="Residential apartments">Residential apartments</option>
            <option value="Packaged water">Packaged water</option>
            <option value="Bulk water supply">Bulk water supply</option>
          </select>

          <i
            class="bi bi-chevron-down pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm"
          >
          </i>
        </div>
      </div>

      <div class="flex items-center gap-2 mt-5">
        <button
          mat-stroked-button
          class="h-10 rounded-md border border-gray-300 bg-white px-4 text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 transitionflex items-center gap-2"
        >
          <i class="bi bi-funnel text-gray-600 text-sm"></i>
          More Filters
        </button>

        <button
          mat-stroked-button
          class="h-10 rounded-md border border-gray-300 bg-white px-4 text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400transition flex items-center gap-2"
        >
          <i class="bi bi-download text-gray-600 text-sm"></i>
          Export
        </button>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- ================= TABLE ================= -->
  <mat-card class="!rounded-2xl !shadow-sm !bg-white">
    <mat-card-content>
      <div class="overflow-x-auto !bg-white">
        <table mat-table matSort [dataSource]="dataSource" class="w-full border-collapse bg-white">
          <!-- Application ID -->
          <ng-container matColumnDef="appId">
            <th
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
              class="text-gray-700 text-sm font-medium border-b border-gray-200 px-5 py-4 !bg-white"
            >
              Application ID
            </th>
            <td
              mat-cell
              *matCellDef="let n"
              class="px-5 py-4 text-sm font-medium text-gray-900 border-b border-gray-100 hover:bg-slate-50 transition !bg-white"
            >
              {{ n.applicationNumber }}
            </td>
          </ng-container>

          <!-- NOC No -->
          <ng-container matColumnDef="nocNo">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="px-4 py-4 text-left font-medium text-gray-600 bg-white!"
            >
              NOC No.
            </th>
            <td
              mat-cell
              *matCellDef="let n"
              class="px-5 py-4 text-sm text-gray-900 border-b border-gray-100 hover:bg-slate-50 transition !bg-white"
            >
              {{ n.nocNumber || '-' }}
            </td>
          </ng-container>

          <!-- Project Name -->
          <ng-container matColumnDef="projectName">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="px-4 py-4 text-left font-medium text-gray-600 !bg-white"
            >
              Project Name
            </th>
            <td mat-cell *matCellDef="let n" class="px-4 py-4 font-medium text-gray-900 !bg-white">
              {{ n.projectName }}
            </td>
          </ng-container>

          <!-- Category -->
          <ng-container matColumnDef="category">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="px-4 py-4 text-left font-medium text-gray-600 bg-white!"
            >
              Category
            </th>
            <td mat-cell *matCellDef="let n" class="px-4 py-4 bg-white!">
              <span
                class="inline-flex items-center rounded-full border border-gray-300 bg-gray-50 px-3 py-1 text-xs font-medium text-gray-800 bg-white!"
              >
                {{ n.projectCategory }}
              </span>
            </td>
          </ng-container>

          <!-- Type -->
          <ng-container matColumnDef="type">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="px-4 py-4 text-left font-medium text-gray-600 !bg-white"
            >
              Type
            </th>
            <td mat-cell *matCellDef="let n" class="px-4 py-4 text-gray-800 !bg-white">
              {{ n.nocType }}
            </td>
          </ng-container>

          <!-- Location -->
          <ng-container matColumnDef="location">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="px-4 py-4 text-left font-medium text-gray-600 !bg-white"
            >
              Location
            </th>
            <td mat-cell *matCellDef="let n" class="px-4 py-4 text-gray-800 !bg-white">
              <i class="bi bi-geo-alt mr-1"></i>
              {{ n.district }}
            </td>
          </ng-container>

          <!-- Watershed -->
          <ng-container matColumnDef="watershed">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="px-4 py-4 text-left font-medium text-gray-600 !bg-white"
            >
              Watershed
            </th>
            <td mat-cell *matCellDef="let n" class="px-4 py-4 !bg-white">
              <span
                class="px-3 py-1 rounded-full text-xs font-medium !bg-white"
                [ngClass]="{
                  'bg-green-100 text-green-700 ': n.assessmentCategory === 'SAFE',
                  'bg-yellow-100 text-yellow-800': n.assessmentCategory?.includes('CRITICAL'),
                  'bg-red-100 text-red-700': n.assessmentCategory?.includes('OVER')
                }"
              >
                {{ n.assessmentCategory }}
              </span>
            </td>
          </ng-container>

          <!-- Qty -->
          <ng-container matColumnDef="qty">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="px-4 py-4 text-right font-medium text-gray-600 !bg-white"
            >
              Qty (mÂ³/day)
            </th>
            <td mat-cell *matCellDef="let n" class="px-4 py-4 text-right font-medium !bg-white">
              {{ n.freshWaterDaily }}
            </td>
          </ng-container>

          <!-- Status -->
          <ng-container matColumnDef="status">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="px-4 py-4 text-left font-medium text-gray-600 !bg-white"
            >
              Status
            </th>
            <td mat-cell *matCellDef="let n" class="px-4 py-4 !bg-white">
              <span
                class="inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium"
                [ngClass]="{
                  'border-gray-300 bg-gray-100 text-gray-800': n.status === 'Draft',
                  'border-blue-300 bg-blue-100 text-blue-700': n.status === 'Submitted',
                  'border-green-300 bg-green-100 text-green-700': n.status === 'Approved',
                  'border-red-300 bg-red-100 text-red-700': n.status === 'Rejected'
                }"
              >
                {{ n.status }}
              </span>
            </td>
          </ng-container>

          <!-- Actions -->
          <ng-container matColumnDef="actions">
            <th
              mat-header-cell
              *matHeaderCellDef
              class="px-4 py-4 text-left font-medium text-gray-600 !bg-white"
            >
              Actions
            </th>
            <td mat-cell *matCellDef="let n" class="px-4 py-4 !bg-white">
              <button
                [routerLink]="['/noc-application', n.id]"
                class="h-9 w-9 hover:bg-blue-100 flex items-center justify-center"
              >
                <i class="bi bi-eye text-blue-700"></i>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns()"></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: displayedColumns()"
            class="last:border-b-0"
          ></tr>
        </table>
      </div>

      <!-- ================= PAGINATOR ================= -->
      <mat-paginator
        class="!bg-white !rounded-b-2xl"
        [pageSize]="5"
        [pageSizeOptions]="[5, 10, 25]"
        showFirstLastButtons
      >
      </mat-paginator>
    </mat-card-content>
  </mat-card>
</div>
